import{s as At,n as Tt,r as jt,o as Rt}from"../chunks/scheduler.e108d1fd.js";import{S as zt,i as Mt,g as s,s as f,m as te,h as o,j as v,y as I,c as p,f as b,n as le,k as l,l as Dt,a as Ut,x as e,z as k,A as E,B as ne,o as Vt,C as qt}from"../chunks/index.e9311cfd.js";function St(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Gt(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function Nt(t,i=!1){const n=Gt(),g=`_${n}`;return Object.defineProperty(window,g,{value:_=>(i&&Reflect.deleteProperty(window,g),t==null?void 0:t(_)),writable:!1,configurable:!0}),n}async function Ht(t,i={}){return new Promise((n,g)=>{const _=Nt(h=>{n(h),Reflect.deleteProperty(window,`_${r}`)},!0),r=Nt(h=>{g(h),Reflect.deleteProperty(window,`_${_}`)},!0);window.__TAURI_IPC__({cmd:t,callback:_,error:r,...i})})}async function Ft(t){return Ht("tauri",t)}async function Jt(t={}){return typeof t=="object"&&Object.freeze(t),Ft({__tauriModule:"Dialog",message:{cmd:"openDialog",options:t}})}async function Wt(t={}){return typeof t=="object"&&Object.freeze(t),Ft({__tauriModule:"Dialog",message:{cmd:"saveDialog",options:t}})}function Ot(t,i,n){const g=t.slice();return g[23]=i[n],g}function Bt(t){let i,n=t[23]+"",g;return{c(){i=s("li"),g=te(n)},l(_){i=o(_,"LI",{});var r=v(i);g=le(r,n),r.forEach(b)},m(_,r){Ut(_,i,r),e(i,g)},p(_,r){r&4&&n!==(n=_[23]+"")&&Vt(g,n)},d(_){_&&b(i)}}}function Kt(t){let i,n,g="PGN to EPD Converter",_,r,h,m,se="PGN File",S,w,C,N,x,we="Browse",_e,R,Ce='("Browse" only works in the desktop app)',me,T,O,xe="Output File",ye,B,D,Pe,c,oe="Browse",z,ae,ft='("Browse" only works in the desktop app)',je,re,Q,pt="Min Ply",Re,L,ze,ue,X,bt="Max Ply",Me,U,qe,ie,Y,ht="Min ELO",Ge,V,He,de,Z,vt="ECO Prefix",Je,F,We,ce,$,gt="Workers",Ke,A,Qe,P,M,Xe,ke,Ye,q,Ze,Ee,$e,G,et,Ie,tt,H,lt,Te,nt,J,st,De,ot,pe,be,W,Se,at,rt,ee,fe,_t="Logs",ut,he,it,mt,ve=St(t[2]),y=[];for(let a=0;a<ve.length;a+=1)y[a]=Bt(Ot(t,ve,a));return{c(){i=s("div"),n=s("h1"),n.textContent=g,_=f(),r=s("div"),h=s("div"),m=s("label"),m.textContent=se,S=f(),w=s("div"),C=s("input"),N=f(),x=s("button"),x.textContent=we,_e=f(),R=s("p"),R.textContent=Ce,me=f(),T=s("div"),O=s("label"),O.textContent=xe,ye=f(),B=s("div"),D=s("input"),Pe=f(),c=s("button"),c.textContent=oe,z=f(),ae=s("p"),ae.textContent=ft,je=f(),re=s("div"),Q=s("label"),Q.textContent=pt,Re=f(),L=s("input"),ze=f(),ue=s("div"),X=s("label"),X.textContent=bt,Me=f(),U=s("input"),qe=f(),ie=s("div"),Y=s("label"),Y.textContent=ht,Ge=f(),V=s("input"),He=f(),de=s("div"),Z=s("label"),Z.textContent=vt,Je=f(),F=s("input"),We=f(),ce=s("div"),$=s("label"),$.textContent=gt,Ke=f(),A=s("input"),Qe=f(),P=s("div"),M=s("button"),Xe=te("Start"),Ye=f(),q=s("button"),Ze=te("Pause"),$e=f(),G=s("button"),et=te("Resume"),tt=f(),H=s("button"),lt=te("Stop & Save"),nt=f(),J=s("button"),st=te("Stop & Discard"),ot=f(),pe=s("div"),be=s("div"),W=s("div"),Se=te(t[1]),at=te("%"),rt=f(),ee=s("div"),fe=s("h2"),fe.textContent=_t,ut=f(),he=s("ul");for(let a=0;a<y.length;a+=1)y[a].c();this.h()},l(a){i=o(a,"DIV",{class:!0});var d=v(i);n=o(d,"H1",{class:!0,"data-svelte-h":!0}),I(n)!=="svelte-15gemix"&&(n.textContent=g),_=p(d),r=o(d,"DIV",{class:!0});var u=v(r);h=o(u,"DIV",{class:!0});var K=v(h);m=o(K,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),I(m)!=="svelte-r8e5q9"&&(m.textContent=se),S=p(K),w=o(K,"DIV",{class:!0});var Ne=v(w);C=o(Ne,"INPUT",{type:!0,id:!0,class:!0}),N=p(Ne),x=o(Ne,"BUTTON",{class:!0,"data-svelte-h":!0}),I(x)!=="svelte-m0pepn"&&(x.textContent=we),Ne.forEach(b),_e=p(K),R=o(K,"P",{class:!0,"data-svelte-h":!0}),I(R)!=="svelte-1y48u6"&&(R.textContent=Ce),K.forEach(b),me=p(u),T=o(u,"DIV",{class:!0});var ge=v(T);O=o(ge,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),I(O)!=="svelte-klxbfd"&&(O.textContent=xe),ye=p(ge),B=o(ge,"DIV",{class:!0});var Oe=v(B);D=o(Oe,"INPUT",{type:!0,id:!0,class:!0}),Pe=p(Oe),c=o(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),I(c)!=="svelte-ihz0kr"&&(c.textContent=oe),Oe.forEach(b),z=p(ge),ae=o(ge,"P",{class:!0,"data-svelte-h":!0}),I(ae)!=="svelte-1y48u6"&&(ae.textContent=ft),ge.forEach(b),je=p(u),re=o(u,"DIV",{});var Be=v(re);Q=o(Be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),I(Q)!=="svelte-1qgwzrz"&&(Q.textContent=pt),Re=p(Be),L=o(Be,"INPUT",{type:!0,id:!0,class:!0}),Be.forEach(b),ze=p(u),ue=o(u,"DIV",{});var Le=v(ue);X=o(Le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),I(X)!=="svelte-116nzmf"&&(X.textContent=bt),Me=p(Le),U=o(Le,"INPUT",{type:!0,id:!0,class:!0}),Le.forEach(b),qe=p(u),ie=o(u,"DIV",{});var Ue=v(ie);Y=o(Ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),I(Y)!=="svelte-ngaygv"&&(Y.textContent=ht),Ge=p(Ue),V=o(Ue,"INPUT",{type:!0,id:!0,class:!0}),Ue.forEach(b),He=p(u),de=o(u,"DIV",{});var Ve=v(de);Z=o(Ve,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),I(Z)!=="svelte-1k11kvh"&&(Z.textContent=vt),Je=p(Ve),F=o(Ve,"INPUT",{type:!0,id:!0,class:!0}),Ve.forEach(b),We=p(u),ce=o(u,"DIV",{});var Fe=v(ce);$=o(Fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),I($)!=="svelte-cactqk"&&($.textContent=gt),Ke=p(Fe),A=o(Fe,"INPUT",{type:!0,id:!0,class:!0}),Fe.forEach(b),u.forEach(b),Qe=p(d),P=o(d,"DIV",{class:!0});var j=v(P);M=o(j,"BUTTON",{class:!0});var yt=v(M);Xe=le(yt,"Start"),yt.forEach(b),Ye=p(j),q=o(j,"BUTTON",{class:!0});var wt=v(q);Ze=le(wt,"Pause"),wt.forEach(b),$e=p(j),G=o(j,"BUTTON",{class:!0});var Ct=v(G);et=le(Ct,"Resume"),Ct.forEach(b),tt=p(j),H=o(j,"BUTTON",{class:!0});var xt=v(H);lt=le(xt,"Stop & Save"),xt.forEach(b),nt=p(j),J=o(j,"BUTTON",{class:!0});var Pt=v(J);st=le(Pt,"Stop & Discard"),Pt.forEach(b),j.forEach(b),ot=p(d),pe=o(d,"DIV",{class:!0});var kt=v(pe);be=o(kt,"DIV",{class:!0});var Et=v(be);W=o(Et,"DIV",{class:!0,style:!0});var dt=v(W);Se=le(dt,t[1]),at=le(dt,"%"),dt.forEach(b),Et.forEach(b),kt.forEach(b),rt=p(d),ee=o(d,"DIV",{class:!0});var Ae=v(ee);fe=o(Ae,"H2",{class:!0,"data-svelte-h":!0}),I(fe)!=="svelte-1qxymfj"&&(fe.textContent=_t),ut=p(Ae),he=o(Ae,"UL",{});var It=v(he);for(let ct=0;ct<y.length;ct+=1)y[ct].l(It);It.forEach(b),Ae.forEach(b),d.forEach(b),this.h()},h(){l(n,"class","text-2xl font-bold mb-4"),l(m,"for","pgn-file"),l(m,"class","block mb-2"),l(C,"type","text"),l(C,"id","pgn-file"),l(C,"class","w-full p-2 border rounded-l"),l(x,"class","bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r"),l(w,"class","flex"),l(R,"class","text-xs text-gray-500 mt-1"),l(h,"class","flex flex-col"),l(O,"for","output-file"),l(O,"class","block mb-2"),l(D,"type","text"),l(D,"id","output-file"),l(D,"class","w-full p-2 border rounded-l"),l(c,"class","bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r"),l(B,"class","flex"),l(ae,"class","text-xs text-gray-500 mt-1"),l(T,"class","flex flex-col"),l(Q,"for","min-ply"),l(Q,"class","block mb-2"),l(L,"type","number"),l(L,"id","min-ply"),l(L,"class","w-full p-2 border"),l(X,"for","max-ply"),l(X,"class","block mb-2"),l(U,"type","number"),l(U,"id","max-ply"),l(U,"class","w-full p-2 border"),l(Y,"for","min-elo"),l(Y,"class","block mb-2"),l(V,"type","number"),l(V,"id","min-elo"),l(V,"class","w-full p-2 border"),l(Z,"for","eco-prefix"),l(Z,"class","block mb-2"),l(F,"type","text"),l(F,"id","eco-prefix"),l(F,"class","w-full p-2 border"),l($,"for","workers"),l($,"class","block mb-2"),l(A,"type","number"),l(A,"id","workers"),l(A,"class","w-full p-2 border"),l(r,"class","grid grid-cols-2 gap-4 mb-4"),M.disabled=ke=t[0]==="running",l(M,"class","bg-blue-500 text-white px-4 py-2 rounded disabled:bg-gray-400"),q.disabled=Ee=t[0]!=="running",l(q,"class","bg-yellow-500 text-white px-4 py-2 rounded disabled:bg-gray-400"),G.disabled=Ie=t[0]!=="paused",l(G,"class","bg-green-500 text-white px-4 py-2 rounded disabled:bg-gray-400"),H.disabled=Te=t[0]!=="running"&&t[0]!=="paused",l(H,"class","bg-red-500 text-white px-4 py-2 rounded disabled:bg-gray-400"),J.disabled=De=t[0]!=="running"&&t[0]!=="paused",l(J,"class","bg-red-700 text-white px-4 py-2 rounded disabled:bg-gray-400"),l(P,"class","flex space-x-2 mb-4"),l(W,"class","bg-blue-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full"),Dt(W,"width",t[1]+"%"),l(be,"class","w-full bg-gray-200 rounded-full"),l(pe,"class","mb-4"),l(fe,"class","font-bold mb-2"),l(ee,"class","bg-gray-100 p-4 rounded h-64 overflow-y-auto"),l(i,"class","container mx-auto p-4")},m(a,d){Ut(a,i,d),e(i,n),e(i,_),e(i,r),e(r,h),e(h,m),e(h,S),e(h,w),e(w,C),k(C,t[3]),e(w,N),e(w,x),e(h,_e),e(h,R),e(r,me),e(r,T),e(T,O),e(T,ye),e(T,B),e(B,D),k(D,t[4]),e(B,Pe),e(B,c),e(T,z),e(T,ae),e(r,je),e(r,re),e(re,Q),e(re,Re),e(re,L),k(L,t[5]),e(r,ze),e(r,ue),e(ue,X),e(ue,Me),e(ue,U),k(U,t[6]),e(r,qe),e(r,ie),e(ie,Y),e(ie,Ge),e(ie,V),k(V,t[7]),e(r,He),e(r,de),e(de,Z),e(de,Je),e(de,F),k(F,t[8]),e(r,We),e(r,ce),e(ce,$),e(ce,Ke),e(ce,A),k(A,t[9]),e(i,Qe),e(i,P),e(P,M),e(M,Xe),e(P,Ye),e(P,q),e(q,Ze),e(P,$e),e(P,G),e(G,et),e(P,tt),e(P,H),e(H,lt),e(P,nt),e(P,J),e(J,st),e(i,ot),e(i,pe),e(pe,be),e(be,W),e(W,Se),e(W,at),e(i,rt),e(i,ee),e(ee,fe),e(ee,ut),e(ee,he);for(let u=0;u<y.length;u+=1)y[u]&&y[u].m(he,null);it||(mt=[E(C,"input",t[13]),E(x,"click",t[10]),E(D,"input",t[14]),E(c,"click",t[11]),E(L,"input",t[15]),E(U,"input",t[16]),E(V,"input",t[17]),E(F,"input",t[18]),E(A,"input",t[19]),E(M,"click",t[12]),E(q,"click",Qt),E(G,"click",Xt),E(H,"click",t[20]),E(J,"click",t[21])],it=!0)},p(a,[d]){if(d&8&&C.value!==a[3]&&k(C,a[3]),d&16&&D.value!==a[4]&&k(D,a[4]),d&32&&ne(L.value)!==a[5]&&k(L,a[5]),d&64&&ne(U.value)!==a[6]&&k(U,a[6]),d&128&&ne(V.value)!==a[7]&&k(V,a[7]),d&256&&F.value!==a[8]&&k(F,a[8]),d&512&&ne(A.value)!==a[9]&&k(A,a[9]),d&1&&ke!==(ke=a[0]==="running")&&(M.disabled=ke),d&1&&Ee!==(Ee=a[0]!=="running")&&(q.disabled=Ee),d&1&&Ie!==(Ie=a[0]!=="paused")&&(G.disabled=Ie),d&1&&Te!==(Te=a[0]!=="running"&&a[0]!=="paused")&&(H.disabled=Te),d&1&&De!==(De=a[0]!=="running"&&a[0]!=="paused")&&(J.disabled=De),d&2&&Vt(Se,a[1]),d&2&&Dt(W,"width",a[1]+"%"),d&4){ve=St(a[2]);let u;for(u=0;u<ve.length;u+=1){const K=Ot(a,ve,u);y[u]?y[u].p(K,d):(y[u]=Bt(K),y[u].c(),y[u].m(he,null))}for(;u<y.length;u+=1)y[u].d(1);y.length=ve.length}},i:Tt,o:Tt,d(a){a&&b(i),qt(y,a),it=!1,jt(mt)}}}async function Qt(){await fetch("http://127.0.0.1:8000/pause",{method:"POST"})}async function Xt(){await fetch("http://127.0.0.1:8000/resume",{method:"POST"})}async function Lt(t){await fetch(`http://127.0.0.1:8000/stop?save=${t}`,{method:"POST"})}function Yt(t,i,n){let g="disconnected",_=0,r=[],h="",m="output.epd",se=1,S=40,w=2400,C="",N=navigator.hardwareConcurrency||4,x;Rt(()=>{const c=new URLSearchParams(window.location.search);return n(3,h=c.get("pgnFile")||h),n(4,m=c.get("outputFile")||m),n(9,N=parseInt(c.get("workers")||"",10)||N),n(7,w=parseInt(c.get("minElo")||"",10)||w),n(6,S=parseInt(c.get("maxPly")||"",10)||S),x=new WebSocket("ws://127.0.0.1:8000/ws"),x.onopen=()=>{n(0,g="connected"),n(2,r=[...r,"Connected to backend"])},x.onclose=()=>{n(0,g="disconnected"),n(2,r=[...r,"Disconnected from backend"])},x.onmessage=oe=>{const z=JSON.parse(oe.data);n(0,g=z.status),n(1,_=z.progress),n(2,r=[...r,z.message])},()=>{x.close()}});async function we(){try{const c=await Jt({title:"Select PGN File",multiple:!1,filters:[{name:"PGN Files",extensions:["pgn"]}]});c&&n(3,h=c)}catch(c){console.error("Could not open file dialog",c),alert("Selecting a file only works in the desktop app version.")}}async function _e(){try{const c=await Wt({title:"Select Output EPD File",defaultPath:m,filters:[{name:"EPD Files",extensions:["epd"]}]});c&&n(4,m=c)}catch(c){console.error("Could not open save dialog",c),alert("Selecting an output file only works in the desktop app version.")}}async function R(){if(!h){alert("Please select a PGN file.");return}const c={pgn_input_file:h,output_file:m,min_ply:se,max_ply:S,min_elo:w,eco_prefix:C,workers:N};try{const z=await(await fetch("http://127.0.0.1:8000/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).json();n(2,r=[...r,z.message])}catch(oe){n(2,r=[...r,"Error starting processing: "+oe])}}function Ce(){h=this.value,n(3,h)}function me(){m=this.value,n(4,m)}function T(){se=ne(this.value),n(5,se)}function O(){S=ne(this.value),n(6,S)}function xe(){w=ne(this.value),n(7,w)}function ye(){C=this.value,n(8,C)}function B(){N=ne(this.value),n(9,N)}return[g,_,r,h,m,se,S,w,C,N,we,_e,R,Ce,me,T,O,xe,ye,B,()=>Lt(!0),()=>Lt(!1)]}class el extends zt{constructor(i){super(),Mt(this,i,Yt,Kt,At,{})}}export{el as component};
